# ๐๏ธ AutoCAD Web Viewer v3.0

ูุดุฑูุน ูุชูุงูู ูุนุฑุถ ูููุงุช AutoCAD (DWG) ุนูู ุงูููุจ ุจุงุณุชุฎุฏุงู ุชูููุงุช ุญุฏูุซุฉ. ูุชููุฒ ุงููุดุฑูุน ุจุจููุฉ ุจุฑูุฌูุฉ ุงุญุชุฑุงููุฉ ูู ุงูุจุงู ุฃูุฏ (Clean Architecture) ูุชุญูู ูุงูู ูุฑุคูุฉ ุซูุงุฆูุฉ ุงูุฃุจุนุงุฏ ูู ุงููุฑููุช ุฅูุฏ.

---

## ๐ ูุธุฑุฉ ุนุงูุฉ ุนูู ุงููุดุฑูุน

ูุณูุญ ูุฐุง ุงูุชุทุจูู ูููุณุชุฎุฏููู ุจุฑูุน ูููุงุช DWGุ ุชุญููููุง ูู ุฎุงุฏู ASP.NET Coreุ ูุนุฑุถ ูุญุชููุงุชูุง ุงูููุฏุณูุฉ ูู ุงููุชุตูุญ ุจุงุณุชุฎุฏุงู ูุญุฑู Three.js.

### ๐ ุงููููุฒุงุช ุงูุฑุฆูุณูุฉ

#### ุงูุฃุดูุงู ุงูููุฏุณูุฉ ุงููุฏุนููุฉ
| ุงูููุน | ุงูุญุงูุฉ | ุงููุตู |
|-------|--------|-------|
| **Line** | โ ููุชูู | ุงูุฎุทูุท ุงููุณุชูููุฉ |
| **Circle** | โ ููุชูู | ุงูุฏูุงุฆุฑ ุงููุงููุฉ |
| **Arc** | โ ููุชูู | ุงูุฃููุงุณ ุจุฒูุงูุง ูุญุฏุฏุฉ |
| **LwPolyline** | โ ููุชูู | ุงูุฎุทูุท ุงููุชุนุฏุฏุฉ ุฎูููุฉ ุงููุฒู |
| **Text / MText** | โ ููุชูู | ุงููุตูุต ุงูุนุงุฏูุฉ ูุงููุชุนุฏุฏุฉ ุงูุฃุณุทุฑ |
| **Insert (Blocks)** | โ ููุชูู | ุงูุจูููุงุช ูุงููุฑุงุฌุน ูุน ุฏุนู ุงูุชุฏุงุฎู |
| **Hatch** | ๐ ููุฏ ุงูุชุทููุฑ | ุงูุชูุดูุฑ ูุงูุชุนุจุฆุฉ |
| **Dimension** | โณ ูุฎุทุท | ุงูุฃุจุนุงุฏ |
| **Spline** | โณ ูุฎุทุท | ุงูููุญููุงุช |
| **Ellipse** | โณ ูุฎุทุท | ุงููุทุน ุงููุงูุต |

#### ูุธุงู ุงูุทุจูุงุช (Layers)
- โ ุงุณุชุฎุฑุงุฌ ุฌููุน ุงูุทุจูุงุช ูู ููู DWG
- โ ุนุฑุถ ุฃุณูุงุก ุงูุทุจูุงุช ูุฃููุงููุง ูู ููุญุฉ ุฌุงูุจูุฉ
- โ ุงูุชุญูู ูู ุฅุธูุงุฑ/ุฅุฎูุงุก ูู ุทุจูุฉ ุจุดูู ูููุตู
- โ ุชุญุฏูุซ ุงูุนุฑุถ ููุฑุงู ุนูุฏ ุชุบููุฑ ุญุงูุฉ ุงูุทุจูุฉ

#### ุฃููุงุน ุงูุฎุทูุท (Linetypes)
- โ ุงุณุชุฎุฑุงุฌ ุฃููุงุท ุงูุฎุทูุท ูู ููู DWG
- โ ุนุฑุถ ุงูุฎุทูุท ุงููุชูุทุนุฉ (Dashed) ูุงููููุทุฉ (Dotted)
- โ ุฏุนู ุงูู LineDashedMaterial ูู Three.js

#### ุงูุชูุงุนู ูุงูุชุญูู
- โ **Zoom:** ุชูุจูุฑ ูุชุตุบูุฑ ุณูุณ ุจุงุณุชุฎุฏุงู ุนุฌูุฉ ุงููุงูุณ
- โ **Pan:** ุงูุชุญุฑูู ุจุงูุถุบุท ุจุงูุฒุฑ ุงูุฃููู ุฃู ุงูุฃูุณุท
- โ **Select:** ุชุญุฏูุฏ ุงูุนูุงุตุฑ ูุนุฑุถ ุฎุตุงุฆุตูุง ุงูุชูุตูููุฉ
- โ **Auto-Fit:** ุถุจุท ุงููุงููุฑุง ุชููุงุฆูุงู ูุชูุงุณุจ ุงูุฑุณูุฉ ุจุงููุงูู

---

## ๐ ูููู ุงููุดุฑูุน (Solution Structure)

```text
AutoCadViewr/
โโโ ๐ GWDViewer/               # ุงููุฑููุช ุฃูุฏ (Frontend)
โ   โโโ index.html              # ุงููููู ูุงููุงุฌูุฉ
โ   โโโ styles.css              # ุงูุชุตููู ุงูุญุฏูุซ ููุธุงู ุงูู Sidebar
โ   โโโ viewer.js               # ููุทู Three.js ูุงูุชูุงุนู ูุน ุงูู API
โ
โโโ โ๏ธ DWGViewerAPI/            # ุงูุจุงู ุฃูุฏ (Backend - ASP.NET Core)
    โโโ Controllers/            # ุงูู API Endpoints
    โ   โโโ DwgController.cs    # ููุงุท ุงูููุงูุฉ ูุฑูุน ููุนุงูุฌุฉ ุงููููุงุช
    โ
    โโโ Infrastructure/         # ุงูุจููุฉ ุงูุชุญุชูุฉ
    โ   โโโ FileDownloader.cs   # ุชุญููู ุงููููุงุช ูู ุฑูุงุจุท ุฎุงุฑุฌูุฉ
    โ
    โโโ Models/                 # ููุงูุจ ุงูุจูุงูุงุช
    โ   โโโ Entities/           # ููุงุฐุฌ ุงูููุงูุงุช
    โ   โโโ Geometry/           # ุงูููุงุฐุฌ ุงูููุฏุณูุฉ
    โ   โโโ DwgFileResult.cs    # ูุชูุฌุฉ ุงูุชุญููู (Entities + Layers + Linetypes)
    โ
    โโโ Services/               # ููุทู ุงูุนูู
        โโโ Converters/         # ุงููุญููุงุช ุงูุฐููุฉ (Strategy Pattern)
        โ   โโโ LineConverter.cs
        โ   โโโ CircleConverter.cs
        โ   โโโ LwPolylineConverter.cs
        โ   โโโ TextConverter.cs
        โ   โโโ InsertConverter.cs
        โ   โโโ HatchConverter.cs
        โ
        โโโ Interfaces/         # ุงููุงุฌูุงุช ูุงูุนููุฏ
        โโโ ColorResolver.cs    # ุญู ุงูุฃููุงู (ByLayer/ByBlock)
        โโโ EntityConverter.cs  # ุงููุญูู ุงูุฑุฆูุณู
        โโโ DwgParserService.cs # ุฎุฏูุฉ ุงูุชุญููู ุงูุดุงููุฉ
```

---

## ๐จ ุงููุงุฌูุฉ ุงูุฃูุงููุฉ (Frontend)

### ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ
- **Three.js** - ูุญุฑู WebGL ููุฑุณูููุงุช ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ
- **Vanilla JavaScript** - ุจุฏูู ุฅุทุงุฑุงุช ุนูู ููุญูุงุธ ุนูู ุงูุฃุฏุงุก
- **CSS3** - ุชุตููู ุนุตุฑู ูุน Dark Mode

### ููููุงุช ุงููุงุฌูุฉ
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐ Upload Panel                                        โ
โ  ๐ URL Input                                           โ
โ  ๐ Search by Handle                                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                         โ
โ                    Three.js Viewer                      โ
โ                    (Orthographic Camera)                โ
โ                                                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ๐ Properties Panel                                    โ
โ  ๐๏ธ Layers Panel (Toggle Visibility)                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐งฌ ุงูุจุงู ุฃูุฏ (Backend Architecture)

### ุงูุจููุฉ ุงููุนูุงุฑูุฉ
ุชู ุจูุงุก ุงูู API ุจุงุณุชุฎุฏุงู **Clean Architecture** ูุน ุชุทุจูู ุงูุฃููุงุท ุงูุชุงููุฉ:

#### 1. Strategy Pattern (ูููุญููุงุช)
```csharp
public interface IEntityTypeConverter
{
    bool CanConvert(Entity entity);
    void Convert(Entity entity, DwgEntity result, CadDocument doc);
}
```
ูู ููุน ููุงู ูู ูุญูู ุฎุงุต ุจูุ ููุง ูุฌุนู ุฅุถุงูุฉ ุฃููุงุน ุฌุฏูุฏุฉ ุณููุฉ ููุบุงูุฉ.

#### 2. Dependency Injection
ุฌููุน ุงูุฎุฏูุงุช ูุชู ุญูููุง ุฏููุงููููุงู ูู `Program.cs`:
```csharp
builder.Services.AddScoped<IEntityTypeConverter, LineConverter>();
builder.Services.AddScoped<IEntityTypeConverter, CircleConverter>();
// ... ุงููุฒูุฏ ูู ุงููุญููุงุช
```

#### 3. Color Resolution
ูุธุงู ุฐูู ูุญู ุงูุฃููุงู ูุฏุนู:
- ByLayer - ุงูููู ูู ุงูุทุจูุฉ
- ByBlock - ุงูููู ูู ุงูุจููู ุงูุญุงูู
- True Color - ุงูููู ุงููุจุงุดุฑ (RGB)
- Index Color - ููู ูู ุฌุฏูู ุงูู ACI

---

## ๐๏ธ ููููุฉ ุงูุชุดุบูู

### ุงููุชุทูุจุงุช
- **.NET 10.0 SDK** ุฃู ุฃุญุฏุซ
- **ูุชุตูุญ ุญุฏูุซ** ูุฏุนู WebGL (Chrome, Firefox, Edge)

### ุชุดุบูู ุงูุจุงู ุฃูุฏ
```bash
cd DWGViewerAPI
dotnet run
```
ุงูู API ูุนูู ุงูุชุฑุงุถูุงู ุนูู `http://localhost:5183`

### ุชุดุบูู ุงููุฑููุช ุฃูุฏ
```bash
cd GWDViewer
# ุงูุชุญ index.html ูู ุงููุชุตูุญ ูุจุงุดุฑุฉ
# ุฃู ุงุณุชุฎุฏู Live Server ูู VS Code
```

---

## ๐ก API Endpoints

| Method | Endpoint | ุงููุตู |
|--------|----------|-------|
| POST | `/api/dwg/upload` | ุฑูุน ููู DWG ููุชุญููู |
| POST | `/api/dwg/parse-from-url` | ุชุญููู ููู ูู ุฑุงุจุท ุฎุงุฑุฌู |

### ูุซุงู ุนูู ุงูุงุณุชุฌุงุจุฉ (Response)
```json
{
  "entities": [
    {
      "id": "1A3",
      "type": "Line",
      "geometry": { "points": [[0,0,0], [100,50,0]] },
      "dwgProperties": {
        "Layer": "Walls",
        "Color": "255, 255, 0",
        "LineType": "Continuous"
      }
    }
  ],
  "layers": [
    { "name": "Walls", "color": "255, 255, 0", "isVisible": true }
  ],
  "linetypes": [
    { "name": "DASHED", "pattern": [5.0, -2.5] }
  ]
}
```

---

## โ ูุจุงุฏุฆ ุงูุชุตููู ุงููุชุจุนุฉ

- **SOLID Principles** - ุชู ุชุทุจูููุง ุจุงููุงูู
- **Clean Architecture** - ูุตู ูุงุถุญ ุจูู ุงูุทุจูุงุช
- **Strategy Pattern** - ูููุญููุงุช ุงููุงุจูุฉ ููุชูุณุน
- **Dependency Injection** - ูุณูููุฉ ุงูุงุฎุชุจุงุฑ ูุงูุตูุงูุฉ

---

## ๐ฎ ุฎุงุฑุทุฉ ุงูุทุฑูู (Roadmap)

### ุงููุฑุญูุฉ ุงูุญุงููุฉ (v3.0)
- [x] ุฏุนู ุงูุฃุดูุงู ุงูุฃุณุงุณูุฉ (Line, Circle, Arc)
- [x] ุฏุนู LwPolyline ู Text/MText
- [x] ุฏุนู ุงูุจูููุงุช (Insert) ูุน ุงูุชุฏุงุฎู
- [x] ูุธุงู ุงูุทุจูุงุช ุงููุงูู
- [x] ุฃููุงุน ุงูุฎุทูุท (Linetypes)
- [ ] ุชุญุณูู ุฏุนู Hatch

### ุงููุฑุญูุฉ ุงููุงุฏูุฉ (v4.0)
- [ ] ุฏุนู Dimensions
- [ ] ุฏุนู Splines ู Ellipses
- [ ] Crosshair Cursor
- [ ] ุชุตุฏูุฑ ุฅูู PDF/PNG


