# ุชูุซูู ููุฏุณุฉ ูุดุฑูุน DWGViewerAPI ๐

ููุฏ ุชู ุชุญููู ุงููุดุฑูุน ุฅูู ููุฏุณุฉ ูุธููุฉ (Clean Architecture) ูุน ุชุทุจูู ุฃููุงุท ุชุตููู ูุชูุฏูุฉ ูุซู **Strategy Pattern** ูุถูุงู ุฃุนูู ูุณุชููุงุช ุงููุฑููุฉ ูุงููุธุงูุฉ ูู ุงูููุฏ.

## ๐ ูููู ุงููุฌูุฏุงุช ุงููุทูุฑ

```text
DWGViewerAPI
โโโ ๐๏ธ Infrastructure       # ุงูุนูููุงุช ุงูุชูููุฉ (ูุซู ุชุญููู ุงููููุงุช)
โโโ ๐ฆ Models               # ููุงูุจ ุงูุจูุงูุงุช (Entities, Geometry, Requests)
โโโ ๐๏ธ Services             # ููุทู ุงูุนูู (Business Logic)
โ   โโโ Interfaces         # ุฌููุน ุงูู Interfaces (ุงูุนููุฏ)
โ   โโโ Converters         # ุงููุญููุงุช ุงููุชุฎุตุตุฉ (Strategy Pattern) 
โ   โ   โโโ LineConverter.cs
โ   โ   โโโ CircleConverter.cs
โ   โ   โโโ ArcConverter.cs
โ   โโโ ColorResolver.cs    # ุญู ุฃููุงู ุงูุฃูุชููุงุฏ
โ   โโโ EntityConverter.cs  # ุงููุญูู ุงูุฑุฆูุณู (Orchestrator)
โ   โโโ DwgParserService.cs # ุงููุงูุณุชุฑู ุงูููู ูููุดุฑูุน
โโโ ๐ฎ Controllers          # ููุทุฉ ุงูุฏุฎูู (API Endpoints)
```

---

## ๐ ุดุฑุญ ุชูุตููู ููููููุงุช ุงููุชูุฏูุฉ

### 1. ูุธุงู ุงููุญููุงุช (Strategy Pattern)

ูุฐุง ูู ุงูุชุบููุฑ ุงูุฃูู ูุถูุงู ุฃู ุงูููุฏ ูู ูุญุชุงุฌ ููุชุนุฏูู ูุณุชูุจูุงู ุนูุฏ ุฅุถุงูุฉ ุฃููุงุน ุฌุฏูุฏุฉ:

*   **`IEntityTypeConverter`**: ูุงุฌูุฉ ุจุฑูุฌูุฉ ููุญุฏุฉ ููู ูุญูู ูุชุฎุตุต.
*   **ุงููุญููุงุช ุงููุณุชููุฉ (`Converters/`)**: ูู ููุน ุนูุตุฑ ูู ุงูุฃูุชููุงุฏ (Line, Circle, Arc) ูู Class ูุณุชูู ุชูุงูุงู ูุณุคูู ุนู ุงุณุชุฎุฑุงุฌ ููุฏุณุชู ูุฎุตุงุฆุตู.
*   **`EntityConverter` ุงูุฑุฆูุณู**: ูู ูุนุฏ ูุญุชูู ุนูู `switch` ุฃู `if`. ูู ุงูุขู "ุตููุงู" ูุฃุฎุฐ ุงูุนูุตุฑุ ูุจุญุซ ุนู ุงููุญูู (Strategy) ุงูููุงุณุจ ูู ูู ุงููุงุฆูุฉ ุงููุญูููุฉุ ููููุฐู.

### 2. ุงูุฎุฏูุงุช ุงูุฃุณุงุณูุฉ (Core Services)

*   **`DwgParserService`**: ูุณูุฑ ุนุจุฑ ุงูุนูุงุตุฑ ูู ูุณุชูุฏ ุงูู DWG ูููุณู ุนูููุฉ ุงูุชุญููู ุงููููุฉ.
*   **`ColorResolver`**: ุฎุฏูุฉ ูุชุฎุตุตุฉ ุชุถูู ุฏูุฉ ุงูุฃููุงู ูููุงู ููุธุงู ุงูุฃูุชููุงุฏ (ByLayer/ByBlock).
*   **`DwgReaderService`**: ุนุงุฒู ูููุชุจุฉ `ACadSharp` ูุณูููุฉ ุงุณุชุจุฏุงููุง ูุงุญูุงู.

### 3. ุงูุจููุฉ ุงูุชุญุชูุฉ (Infrastructure)

*   **`FileDownloader`**: ุฎุฏูุฉ ูุณุชููุฉ ุชูุงูุงู ููุชุนุงูู ูุน ุชุญููู ุงููููุงุช ูู ุงูุฑูุงุจุท (ูุซู AWS S3) ูุน ูุนุงูุฌุฉ ุงูู Tokens ูุงูู User-Agents.

---

## โ๏ธ ูุณุงุฑ ุงูุจูุงูุงุช (Data Flow)

1.  ูุตู ุงูุทูุจ ูู **`DwgController`**.
2.  ููุทูุจ ุชุญููู ุงูููู ุนุจุฑ **`DwgParserService`**.
3.  ุชูุฑุฃ ุงูููู ุฎุฏูุฉ **`DwgReaderService`**.
4.  ููู ุนูุตุฑุ ูุชู ุงุณุชุฏุนุงุก **`EntityConverter.Convert()`**.
5.  ุงูู **`EntityConverter`** ูุจุญุซ ูู ูุงุฆูุฉ ุงูู **`IEntityTypeConverter`** ุงููุณุฌูุฉ ุนู ุงููุญูู ุงูููุงุณุจ ููููุน ุงูุญุงูู.
6.  ูููู ุงููุญูู ุงููุชุฎุตุต (ูุซู **`LineConverter`**) ุจุจูุงุก ุงูุฎุตุงุฆุต ุงูููุฏุณูุฉ.
7.  ุชูุฌูุน ุงููุชุงุฆุฌ ูุชูุฑุณู ูู JSON ูููุชุตูุญ.

---

## โ ุงููููุฒุงุช ุงูููุชุณุจุฉ (Principles)

1.  **Open/Closed Principle (OCP)**: ุงูููุฏ ุงูุขู ููุชูุญ ูุฅุถุงูุฉ ุฃู ููุน ุฌุฏูุฏ (ููุท ุฃูุดุฆ ููุงุณ ุฌุฏูุฏ ูุณุฌูู) ููุบูู ุชูุงูุงู ุถุฏ ุชุนุฏูู ุงูููุฏ ุงููุฏูู.
2.  **Single Responsibility Principle (SRP)**: ูู ููู Class ูุณุคูู ุนู ุดูุก ูุงุญุฏ ููุท (ุงูุฃููุงูุ ุงูุฎุทูุทุ ุงูุชุญูููุ ุฅูุฎ).
3.  **Dependency Injection (DI)**: ูุชู ุญูู ูู ุงููุญููุงุช ูุงูุฎุฏูุงุช ุฏููุงููููุงู ุนุจุฑ ุงูู Constructorุ ููุง ูุฌุนู ุงูููุฏ ุณูู ุงูุงุฎุชุจุงุฑ (Testable).
4.  **Scalability**: ุงููุดุฑูุน ุงูุขู ูููุฃ ููุชุญูู ูู ูุฌุฑุฏ ุชุทุจูู ุชุฌุฑูุจู ุฅูู ูุญุฑู ุชุญููู DWG ุถุฎู ูุฏุนู ูุฆุงุช ุงูุฃููุงุน ุงููุนูุฏุฉ.
